<div class="breadcrumb-div">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/home/dashboard/">{{'label.AddCampaign.Home' | translate}}</a></li>
        <li class="breadcrumb-item active">{{role.menuLabel}}</li>
    </ol>
</div>
<div class="inner-head campadd-head">
    <h2><a (click)=back() href="javascript:void(0)" class="back-btn"><span
                class="icon-back"></span></a>{{role.menuLabel}}

        <a *ngIf="compaignObj.campaignType == 'Push'" class="add-btn test-sms" data-toggle="modal" (click)="preview()"
            data-target="#preview-modal"><img src="../../../assets/images/text-sms.png">
            {{'label.AddCampaign.Preview' | translate}}</a>
    </h2>

</div>
<!-- <div class="breadcrumb-div">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/home/dashboard/">Home</a></li>
        <li *ngIf="!Edit && !isApprove" class="breadcrumb-item active">Add {{role.menuLabel}}</li>
        <li *ngIf="Edit" class="breadcrumb-item active">Edit {{role.menuLabel}}</li>
        <li *ngIf="isApprove" class="breadcrumb-item active">Approve {{role.menuLabel}}</li>
    </ol>
</div>
<div class="inner-head">
    <h2 *ngIf="!Edit">Add {{role.menuLabel}}</h2>
    <h2 *ngIf="Edit">Edit {{role.menuLabel}}</h2>
</div> -->
<form [formGroup]="compaingForm">
    <div class="form-list">
        <div class="row">
            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.CampaignType' | translate}} <span class="required">*</span></label>
                    <div class="radio-group pushpull-radiogroup" (change)='campaginTypeChange()'>
                        <div class="radio-btn">
                            <input type="radio" name="channel" value="Push" formControlName="campaignType"
                                [(ngModel)]="compaignObj.campaignType" id="channel1" />
                            <label class="radio-label" for="channel1">{{'label.AddCampaign.Push' | translate}}</label>
                        </div>
                        <div class="radio-btn">
                            <input type="radio" name="channel" value="Pull" formControlName="campaignType"
                                [(ngModel)]="compaignObj.campaignType" id="channel2" />
                            <label class="radio-label" for="channel2">{{'label.AddCampaign.Pull' | translate}}</label>
                        </div>
                        <div class="radio-btn">
                            <input type="radio" name="channel" value="Push & Pull" formControlName="campaignType"
                                [(ngModel)]="compaignObj.campaignType" id="channel3" />
                            <label class="radio-label"
                                for="channel3">{{'label.AddCampaign.PushPull' | translate}}</label>
                        </div>
                    </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['campaignType'].hasError('required') && compaingForm.controls['campaignType'].touched">
                        {{'error.AddCampaign.CampaignType' | translate}}
                    </div>
                    <!-- <div class="styled-select">

                        <select (change)='campaginTypeChange($event)' formControlName="campaignType"
                            [(ngModel)]="compaignObj.campaignType" id="channel">
                            <option value="undefined" selected disabled>Select Campaign Type</option>
                            <option value="1">Push</option>
                            <option value="2">Pull</option>
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div> -->
                    <!-- <div class="error error-position"
                    *ngIf="compaingForm.controls['campaignType'].hasError('required') && compaingForm.controls['campaignType'].touched">
                    Campaign Type is required
                </div> -->
                </div>
            </div>
            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group" formArrayName="channel" [class.disabled]="compFormDisable">
                    <label>{{'label.AddCampaign.SelectChannel' | translate}} <span class="required">*</span></label>
                    <div class="radio-group compaign-radio">
                        <div class="radio-btn" *ngFor="let stat of listChannelId let i=index;" formGroupName="{{i}}"
                            (change)='campaginChange($event,stat)'>
                            <input formControlName="channel" id="radio-{{i}}" type="radio"
                                [(ngModel)]="compaignObj.channel" value="{{stat.channelId}}" />
                            <label for="radio-{{i}}" class="radio-label">{{stat.channelDesc}}</label>
                            <span class="i-bg"></span>
                        </div>

                    </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['channel'].hasError('required') && compaingForm.controls['channel'].touched">
                        {{'error.AddCampaign.Channel ' | translate}}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-10 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.CampaignName' | translate}} <span class="required">*</span></label>
                    <input type="text" class="form-control" [(ngModel)]="compaignObj.campaignDesc"
                        formControlName="campaignDesc" id="campaignDesc"
                        (focusout)="focusOutUserId(compaignObj.campaignDesc)"
                        (input)='changeField($event,"[^0-9 a-zA-Z]","1","35","campaignDesc",compaignObj.campaignDesc.length)'>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['campaignDesc'].hasError('required') && compaingForm.controls['campaignDesc'].touched">
                        {{'error.AddCampaign.Campaignname' | translate}} </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['campaignDesc'].hasError('alreadyExist')&& compaingForm.controls['campaignDesc'].touched">
                        {{'error.AddCampaign.Campaignalready' | translate}} </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.Department' | translate}} <span class="required">*</span></label>
                    <div class="styled-select">

                        <select [(ngModel)]="compaignObj.department" formControlName="department" id="department">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectDepartment' | translate}} </option>
                            <option *ngFor="let listDepartments of listDepartments; let i=index "
                                value="{{listDepartments.departmentId}}">{{listDepartments.departmentName}}</option>
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['department'].hasError('required') && compaingForm.controls['department'].touched">
                        {{'error.AddCampaign.Department' | translate}} </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.PriorityLevel' | translate}} <span class="required">*</span></label>
                    <div class="styled-select">

                        <select formControlName="priorityLevel" [(ngModel)]="compaignObj.prioritylvl"
                            id="priorityLevel">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectPriorityLevel' | translate}}</option>

                            <option *ngFor="let listPriorityId of listPriorityId; let i=index "
                                value="{{listPriorityId.Id}}">
                                {{listPriorityId.priorityNumber}} -
                                {{listPriorityId.description}}</option>

                            <!-- <option>973</option> -->
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['priorityLevel'].hasError('required') && compaingForm.controls['priorityLevel'].touched">
                        {{'error.AddCampaign.PriorityLevel' | translate}}
                    </div>
                </div>
            </div>


            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.Language' | translate}} <span class="required">*</span></label>
                    <div class="styled-select">
                        <select formControlName="Language"
                        (change)="changeLanguage($event)" [(ngModel)]="compaignObj.language" id="Language">
                            <option value="" selected disabled>
                                {{'label.AddCampaign.Language' | translate}}</option>
                            <option *ngFor="let listLanguageId of listLanguageId; let i=index "
                                value="{{listLanguageId.langId}}">{{listLanguageId.langDesc}}</option>
                            
                        </select>
                        
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['Language'].hasError('required') && compaingForm.controls['Language'].touched">
                        {{'error.AddCampaign.Language' | translate}} </div>
                </div>
            </div>
            <!-- <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>Campaign Category <span class="required">*</span></label>
                    <div class="styled-select">

                          <select formControlName="Category" [(ngModel)]="compaignObj.category" id="Category">
                            <option value="undefined" selected disabled>Select Category</option>


                            <option *ngFor="let listCategoryId of listCategoryId; let i=index "
                                value="{{listCategoryId.categoryId}}">{{listCategoryId.categoryName}}</option>

                        <span class="fa fa-sort-desc"></span>
                    </div>
                </div>
            </div> -->
            <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">
                    <label>{{'label.AddCampaign.Category' | translate}} <span class="required">*</span></label>
                    <div class="styled-select">

                        <select formControlName="Category" [(ngModel)]="compaignObj.category" id="Category">
                            <option value="" selected disabled>{{'label.AddCampaign.SelectCategory' | translate}}
                            </option>


                            <option *ngFor="let listCategoryId of listCategoryId; let i=index "
                                value="{{listCategoryId.categoryId}}">{{listCategoryId.categoryName}}</option>

                            <!-- <option>973</option> -->
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['Category'].hasError('required') && compaingForm.controls['Category'].touched">
                        {{'error.AddCampaign.Category' | translate}}
                    </div>
                </div>

            </div>
            <div class="col-sm-6 col-md-5 col-xs-12"
                *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'">
                <div class="form-group">
                    <label> {{'label.AddCampaign.ScheduleTime' | translate}} <span class="required">*</span></label>
                    <input [owlDateTime]="dt1" [min]="minDate" class="form-control" formControlName="scheduledTimeDup"
                      [(ngModel)]="compaignObj.scheduledTimeDup" [owlDateTimeTrigger]="dt1" placeholder="Date Time">
                    <owl-date-time #dt1></owl-date-time>
                    <span class="icon-date div-date"></span>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['scheduledTimeDup'].hasError('required') && compaingForm.controls['scheduledTimeDup'].touched">
                        {{'error.AddCampaign.Time' | translate}} </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['scheduledTimeDup'].hasError('owlDateTimeMin') && compaingForm.controls['scheduledTimeDup'].touched">
                        {{'error.AddCampaign.ScheduleTime' | translate}} </div>
                </div>

            </div>
            <div class="col-sm-6 col-md-5 col-xs-12"
                *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'">
                <div class="form-group">
                    <label>{{'label.AddCampaign.ValidityDateTime' | translate}} <span class="required">*</span></label>
                    <input [owlDateTime]="dt2" [min]="compaignObj.scheduledTimeDup" class="form-control" formControlName="validityDateTime"
                        [(ngModel)]="compaignObj.validityDateTime" [owlDateTimeTrigger]="dt2" placeholder="Date Time">
                    <owl-date-time #dt2></owl-date-time>
                    <span class="icon-date div-date"></span>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['validityDateTime'].hasError('required') && compaingForm.controls['validityDateTime'].touched">
                        {{'error.AddCampaign.ValidityDateTime' | translate}} </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['validityDateTime'].hasError('owlDateTimeMin') && compaingForm.controls['validityDateTime'].touched">
                        {{'error.AddCampaign.ValidityDateTime' | translate}} </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-5 col-xs-12"
                *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'">
                <div class="form-group">
                    <label>{{'label.AddCampaign.GetTimeZone' | translate}} <span class="required">*</span></label>
                    <div class="styled-select">
                        <select formControlName="getZones" [(ngModel)]="compaignObj.getZones" id="getZones">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectTimeZone ' | translate}} </option>
                            <option *ngFor="let zones of listZones; let i=index " value="{{zones.gmtOffset}}">
                                {{zones.timeZone}}</option>
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>
                    <div class="error error-position"
                        *ngIf="compaingForm.controls['getZones'].hasError('required') && compaingForm.controls['getZones'].touched">
                        {{'error.AddCampaign.Timezone' | translate}}
                    </div>
                </div>
            </div>



            <div class="col-sm-6 col-md-5 col-xs-12"
                *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'">
                <div class="form-group">
                    <label>{{'label.AddCampaign.DistributionList' | translate}} </label>
                    <div class="styled-select">

                        <select (change)='distList($event)' formControlName="distribution"
                            [(ngModel)]="compaignObj.distribution" id="distribution">
                            <option value="undefined" selected>{{'label.AddCampaign.SelectDistribution' | translate}}
                            </option>
                            <option *ngFor="let distribution of distributionList; let i=index "
                                value="{{distribution.distributionId}}">{{distribution.distributionName}}</option>
                            <!-- <option>973</option> -->
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['distribution'].hasError('required') && compaingForm.controls['distribution'].touched">
                        {{'error.AddCampaign.Distributionlist' | translate}}
                    </div>
                </div>
            </div>

        </div>

        <div class="row">
            <div class="col-sm-6 col-md-5 col-xs-12" *ngIf="compaignObj.channel==3">
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" formControlName="isSdkIntegration" (change)='changeIssdk($event)'
                                [(ngModel)]="compaignObj.isSdkIntegration" />
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            {{'label.AddCampaign.isSdkIntegration' | translate}}
                            &nbsp;&nbsp;</label>
                    </div>


                </div>
            </div>

        </div>


        <div class="row">
            <div class="col-sm-6 col-md-5 col-xs-12" *ngIf="compaignObj.channel==1">
                <div class="form-group">
                    <label>{{'label.AddCampaign.SenderId' | translate}} </label>
                    <div class="styled-select">

                        <select [(ngModel)]="compaignObj.senderID" formControlName="senderId" id="senderId">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectSenderId' | translate}} </option>
                            <option *ngFor="let listSenderId of listSenderId; let i=index "
                                value="{{listSenderId.senderId}}">{{listSenderId.senderDesc}}</option>
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['senderId'].hasError('required') && compaingForm.controls['senderId'].touched">
                        {{'error.AddCampaign.SenderId' | translate}} </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-5 col-xs-12" *ngIf="compaignObj.channel==1">
                <div class="form-group">
                    <label>{{'label.AddCampaign.Operator' | translate}} </label>
                    <div class="styled-select">

                        <select formControlName="Operator" [(ngModel)]="compaignObj.operator" id="Operator">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectOperator' | translate}}</option>
                            <option *ngFor="let listOperatorId of listOperatorId; let i=index "
                                value="{{listOperatorId.operatorId}}">{{listOperatorId.operatorDesc}}</option>
                            <!-- <option>973</option> -->
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['Operator'].hasError('required') && compaingForm.controls['Operator'].touched">
                        {{'error.AddCampaign.Operator' | translate}}
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-5 col-xs-12" *ngIf="compaignObj.channel==3">
                <div class="form-group">
                    <label>{{'label.AddCampaign.AppName' | translate}} </label>
                    <div class="styled-select">

                        <select formControlName="appName" [(ngModel)]="compaignObj.appName" id="appName">
                            <option value="undefined" selected disabled>
                                {{'label.AddCampaign.SelectAppName' | translate}}</option>
                            <option *ngFor="let app of appName; let i=index " value="{{app.mobileId}}">
                                {{app.mobileName}}</option>
                        </select>
                        <span class="fa fa-sort-desc"></span>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['appName'].hasError('required') && compaingForm.controls['appName'].touched">
                        {{'error.AddCampaign.Appname' | translate}}
                    </div>
                </div>
            </div>
            <!-- <div class="col-sm-6 col-md-5 col-xs-12">
                <div class="form-group">


                    <label>{{'label.AddCampaign.selctPromotion' | translate}}</label>

                    <p-multiSelect placeholder="{{'label.AddCampaign.selctPromotion' | translate}}"
                        [options]="listPromoDropdown" optionLabel="promoName" [(ngModel)]="compaignObj.promoName"
                        formControlName="selctPromotion" [filter]="true">
                        <ng-template let-selectedCars pTemplate="selectedItems">
                            <span *ngFor="let selectedCar of selectedCars">{{selectedCar.promoName}}</span>
                            <span class="multi-last" *ngIf="compaignObj.promoName.length>=2">
                                {{compaignObj.promoName.length}}</span>
                        </ng-template>


                    </p-multiSelect> -->


                    <!-- <div class="checkbox">
                        <label>
                            <input type="checkbox" formControlName="selctPromotion"/>
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            {{'label.AddCampaign.selctPromotion' | translate}}
                            &nbsp;&nbsp;</label>
                    </div> -->

                    <!-- <div class="error error-position"
                        *ngIf="compaingForm.controls['containText'].hasError('required') && compaingForm.controls['containText'].touched">
                        {{'error.AddCampaign.Filecontains' | translate}}  </div> -->
                <!-- </div>
            </div> -->
            <div class="col-sm-6 col-md-5 col-xs-12"
                *ngIf="this.compaignObj.isDl=='0' && (compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull')">
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" formControlName="containText" (change)="onChange($event)" />
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            {{'label.AddCampaign.FileContainsText' | translate}}
                            &nbsp;&nbsp;</label>
                    </div>

                    <div class="error error-position"
                        *ngIf="compaingForm.controls['containText'].hasError('required') && compaingForm.controls['containText'].touched">
                        {{'error.AddCampaign.Filecontains' | translate}} </div>
                </div>
            </div>
        </div>
        <div class="row templat-popup newtemplate-popup"
            *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'">
            <div class="col-sm-12 col-md-10 col-xs-12">
                <label>{{'label.AddCampaign.Template' | translate}} <span class="required"></span></label>
                <div class="cc-upload">
                    <div class="custom-upload" *ngIf="compaignObj.selectedTemplated">
                        <div class="input-group">{{compaignObj.selectedTemplated.templateName}}</div>
                        <button class="add-btn" data-toggle="modal" data-target="#multitemplate-popup">
                            {{'label.AddCampaign.ChangeTemplate' | translate}}
                        </button>
                    </div>
                    <div class="custom-upload" *ngIf="!compaignObj.selectedTemplated">
                        <div class="input-group">{{'label.AddCampaign.Please' | translate}}
                        </div>
                        <button class="add-btn" [class.disabled]="compFormDisable" data-toggle="modal"
                            data-target="#multitemplate-popup">
                            {{'label.AddCampaign.SelectTemplate' | translate}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row templat-popup newtemplate-popup">
            <!-- *ngIf="compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull'"> -->
            <div class="col-sm-12 col-md-10 col-xs-12">
                <label>{{'label.AddCampaign.PromoTemplate' | translate}} <span class="required"></span></label>
                <div class="cc-upload">
                    
                    <div class="custom-upload " *ngIf="promoArry.length >=1">
                        <ul class="input-content ellipsis1" >
                            <li *ngFor="let promoName of promoArry">{{promoName}}</li></ul>
                            
                        <button class="add-btn" [class.disabled]="compFormDisable" data-toggle="modal" data-target="#multitemplate-popup1">
                            {{'label.AddCampaign.ChangePromoTemplate' | translate}}
                        </button>
                    </div>
                    <div class="custom-upload" *ngIf="promoArry.length <= 0">
                        <div class="input-group">{{'label.AddCampaign.Please1' | translate}}
                        </div>
                        <button class="add-btn" [class.disabled]="compFormDisable" (click)="getPromotemplate()" data-toggle="modal"
                            data-target="#multitemplate-popup1">
                            {{'label.AddCampaign.SelectTemplate1' | translate}}
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-list"
            *ngIf="checkedtrue==0 && (compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull')">
            <h2>{{'label.AddCampaign.Messages' | translate}}</h2>
            <div class="form-list" *ngIf="compaignObj.channel!=2">
                <div class="row">
                    <div class="col-sm-12 col-md-10 col-xs-12">
                        <div class="form-group message-height">
                            <label>{{'label.AddCampaign.Message' | translate}} <span class="required">*</span></label>
                            <div *ngIf="compaignObj.channel== 2">
                                <ckeditor [editor]="Editor" (change)="checkParamsCK($event)"
                                [config]="config"
                                    (ready)="onReady($event)" data="<p>Enter Message Text</p>"
                                    formControlName="messageText" id="reason" [(ngModel)]="compaignObj.msgText"
                                     (input)='changeField($event,"[^0-9 a-z@, A-Z\u0600-\u06FF]","0", this.messageTextLength,"reason",compaignObj.msgText.length)'></ckeditor>
                                    </div>
                            
                                <div *ngIf="compaignObj.channel== 3 || compaignObj.channel== 1">
                                 <textarea formControlName="messageText" placeholder="{{'label.AddCampaign.EnterMessage' | translate}}" type="text"
                            (input)="onInputChange($event)" class="form-control" value={{value}} [(ngModel)]="compaignObj.msgText"  id="text0"    autocomplete="off"
                                (focusout)="messageTextfoucsOut()" (focus)="focusBody()"
                                (input)='changeField($event,"","0", this.messageTextLength,"reason",compaignObj.msgText.length)'></textarea>

                                    <button (click)="activateSpeechSearchMovie(getLangid2)">Give Voice </button>
                                    <button (click)="stopSpeech(getLangid2)">Stop Voice</button>

                                    <button (click)="kealuVoice(getLangid2)">Listen Voice</button>
                                    <button (click)="stopVoice(getLangid2)">Stop Listening</button>


                               <span class="virtualkeyboard"><i class="icon-key"></i></span>
                            </div>
                            <small class="form-text text-muted">

                                <code
                                    *ngIf="compaignObj.msgText.length<= this.messageTextLength">{{ this.messageTextLength - compaignObj.msgText.length}}</code>
                                <code *ngIf="compaignObj.msgText.length> this.messageTextLength">0</code>
                                {{'label.AddCampaign.of' | translate}}
                                <code> {{this.messageTextLength}}</code> {{'label.AddCampaign.charactersleft' | translate}}</small>
                                <span id="virtualkeyboard" class="virtualkeyboard"><i class="icon-key" (click)="AddKeyborad()"></i></span>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['messageText'].hasError('required') && compaingForm.controls['messageText'].touched">
                                {{'error.AddCampaign.Messagetext' | translate}} </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.get('messageText').hasError('maxlength') && compaingForm.get('messageText').touched">
                                {{'error.AddCampaign.PleaseEnterCharacter' | translate}} {{this.messageTextLength}}  {{'error.AddCampaign.Characters' | translate}}
                            </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['messageText'].hasError('existContent')&& compaingForm.controls['messageText'].touched">
                                {{messageError}}</div>

                        </div>
                    </div>

                </div>


            </div>

            <div class="form-list" *ngIf="compaignObj.channel== 2 || compaignObj.channel== 3">
                <div class="row">
                    <div class="col-sm-12 col-md-10 col-xs-12" *ngIf="compaignObj.channel== 2">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.Subject' | translate}} </label>
                            <input type="text" class="form-control" [(ngModel)]="compaignObj.subject"
                                formControlName="subject" id="subject"
                                (input)='changeField($event,"[^0-9 a-zA-Z]","1","100","subject",compaignObj.subject.length)'>

                            <div class="error error-position"
                                *ngIf="compaingForm.controls['subject'].hasError('required') && compaingForm.controls['subject'].touched">
                                {{'error.AddCampaign.Subject' | translate}} </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-10 col-xs-12" *ngIf="compaignObj.channel==2">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.EmailText' | translate}}</label>
                            <div class="form-group">
                                <ckeditor [editor]="Editor" [config]="config" (ready)="onReady($event)"
                                    (focusout)="messageEmailTextfoucsOut($event)" data="<p>Enter Message Text</p>"
                                    [(ngModel)]="compaignObj.msgText" id="reason" formControlName="messageText">
                                </ckeditor>

                                <div class="error error-position"
                                    *ngIf="compaingForm.controls['messageText'].hasError('required') && compaingForm.controls['messageText'].touched">
                                    {{'error.AddCampaign.Messagetext' | translate}}</div>
                                <div class="error error-position"
                                    *ngIf="compaingForm.controls['messageText'].hasError('existContent')&& compaingForm.controls['messageText'].touched">
                                    {{messageError}}</div>
                                <div class="error error-position"
                                    *ngIf="compaingForm.controls['messageText'].hasError('maxlength') && compaingForm.controls['messageText'].touched">
                                    {{'error.AddCampaign.PleaseEnterCharacter' | translate}} {{this.messageTextLength}}  {{'error.AddCampaign.Characters' | translate}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-5 col-xs-12">
                        <div class="custom-upload newimageupload">
                            <label for="imageUpload">{{'label.AddCampaign.WithImage' | translate}}</label>
                            <input type="file" formControlName="attachmentFile" value=""
                                [(ngModel)]="compaignObj.attachmentFile" accept="image/*"
                                (change)="onAttachmentFileChange($event)" class="file" />
                            <div class="input-group">
                                <input type="text" readonly class="form-control" formControlName="attachmentFileName"
                                    [(ngModel)]="compaignObj.attachmentFileName" placeholder="Upload Files" />
                                <span class="input-group-btn input-group-sm">
                                    <button type="button" class="btn btn-fab btn-fab-mini">
                                        {{'label.AddCampaign.ChooseAttachment' | translate}}</button>
                                </span>
                            </div>

                            <!-- <div class="error error-position"
                            *ngIf="compaingForm.controls['file'].hasError('required') && compaingForm.controls['file'].touched">
                            File is required</div> -->
                        </div>
                    </div>


                </div>
            </div>
        </div>
        
        <div class="simple-keyboard"></div>
        <div class="table-list">
            <!-- <h2>Get Mobile Number</h2> -->
            <div class="form-list">
                <div class="row">
                    
                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="this.compaignObj.isDl=='0' && (compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull')">
                        <div class="custom-upload newcustom-upload">
                            <label for="imageUpload"> {{'label.AddCampaign.UploadFile' | translate}}</label>
                            <input type="file" formControlName="file" value="" [(ngModel)]="compaignObj.file"
                                accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                (change)="onFileSelect($event)" class="file" />
                            <div class="input-group">
                                <input type="text" readonly class="form-control" formControlName="fileName"
                                    [(ngModel)]="compaignObj.fileNa" placeholder="Upload Files" />
                                <span class="input-group-btn input-group-sm">
                                    <button type="button" class="btn btn-fab btn-fab-mini">
                                        {{'label.AddCampaign.ChooseFile' | translate}}</button>
                                </span>
                            </div>

                            <div class="error error-position"
                                *ngIf="compaingForm.controls['file'].hasError('required') && compaingForm.controls['file'].touched">
                                {{'error.AddCampaign.ChooseFile' | translate}} </div>
                        </div>
                       
                            <div class="custom-upload newcustom-upload a-liste" *ngIf="this.compaignObj.isDl=='0' && (compaignObj.campaignType == 'Push' || compaignObj.campaignType == 'Push & Pull')">
                                <a for="imageUpload"> {{'label.AddCampaign.downloadSampleFile' | translate}}</a>

                                <!-- <span *ngFor="let file of sampleDownloadFile; let i=index">
                                    <ng-template let-message="myMessage" #myTemplateRef>  
                                        {{file.description}}
                                    </ng-template>
                                    
                                </span> -->

                                <ng-container *ngFor="let file of sampleDownloadFile">
                                    <ng-container *ngIf="file.channel == compaignObj.channel">
                                      <a (click)="downloadSampleFile(file)">{{ file.description }}</a>
                                    </ng-container>
                                  </ng-container>

                            </div>
                        
                    </div>

                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.CampaignStart' | translate}}
                                <span class="required">*</span></label>
                            <input [owlDateTime]="dt3" [min]="minDate" class="form-control" formControlName="startDate"
                                (ngModelChange)="changeCampaignStartDate($event)" [(ngModel)]="compaignObj.startDate"
                                [owlDateTimeTrigger]="dt3" placeholder="Campaign Start Date">
                            <owl-date-time #dt3></owl-date-time>
                            <span class="icon-date div-date"></span>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['startDate'].hasError('required') && compaingForm.controls['startDate'].touched">
                                {{'error.AddCampaign.Campaign' | translate}} </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['startDate'].hasError('owlDateTimeMin') && compaingForm.controls['startDate'].touched">
                                {{'error.AddCampaign.TCampaign' | translate}} </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.CampaignValidity' | translate}}
                                <span class="required">*</span></label>
                            <!-- <input [owlDateTime]="dt4" [min]="minDate" class="form-control"
                                formControlName="campaignValidity" [(ngModel)]="compaignObj.campaignValidity"
                                [owlDateTimeTrigger]="dt4" placeholder="Campaign Validity">
                            <owl-date-time #dt4></owl-date-time>
                            <span class="icon-date div-date"></span>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['campaignValidity'].hasError('required') && compaingForm.controls['campaignValidity'].touched">
                                Campaign Validity is required</div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['campaignValidity'].hasError('owlDateTimeMin') && compaingForm.controls['campaignValidity'].touched">
                                Campaign Validity minimum is required</div> -->

                            <div class="checkbox" style="margin-left: 15px; display: inline-block;">
                                <label>
                                    <input type="checkbox" formControlName="noEndDate"
                                        (change)="onChangenoEndDate($event)" />
                                    <span class="cr"><i
                                            class="cr-icon fa fa-check"></i></span>{{'label.AddCampaign.NO' | translate}}

                                    &nbsp;&nbsp;</label>
                            </div>

                            <div class="error error-position"
                                *ngIf="compaingForm.controls['noEndDate'].hasError('required') && compaingForm.controls['noEndDate'].touched">
                                {{'error.AddCampaign.NO' | translate}} </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="(compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull') && compaignObj.noEndDate==0">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.CampaignEnd' | translate}}
                                <span class="required">*</span></label>
                            <input [owlDateTime]="dt5" [min]="compaignObj.startDate" class="form-control"
                                formControlName="endDate" [(ngModel)]="compaignObj.endDate" [owlDateTimeTrigger]="dt5"
                                placeholder="Campaign End Date">
                            <owl-date-time #dt5></owl-date-time>
                            <span class="icon-date div-date"></span>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['endDate'].hasError('required') && compaingForm.controls['endDate'].touched">
                                {{'error.AddCampaign.CampaignEnd' | translate}} </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['endDate'].hasError('owlDateTimeMin') && compaingForm.controls['endDate'].touched">
                                {{'error.AddCampaign.CampaignEnd' | translate}}</div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-md-5 col-xs-12" *ngIf="compaignObj.campaignType == 'Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.GetTime' | translate}} <span class="required">*</span></label>
                            <div class="styled-select">
                                <select formControlName="getZones" [(ngModel)]="compaignObj.getZones" id="getZones">
                                    <option value="undefined" selected disabled>
                                        {{'label.AddCampaign.SelectTimeZone ' | translate}}</option>
                                    <option *ngFor="let zones of listZones; let i=index " value="{{zones.gmtOffset}}">
                                        {{zones.timeZone}}</option>
                                </select>
                                <span class="fa fa-sort-desc"></span>
                            </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['getZones'].hasError('required') && compaingForm.controls['getZones'].touched">
                                {{'error.AddCampaign.Timezone' | translate}}
                            </div>
                        </div>
                    </div>


                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.Keyword' | translate}} </label>


                            <input type="text" class="form-control" [(ngModel)]="compaignObj.shortCode"
                                formControlName="shortCode" id="shortCode"
                                (focusout)="focusOutshortCode(compaignObj.shortCode)"
                                (input)='changeField($event,"[^0-9a-zA-Z]","1","25","shortCode",compaignObj.shortCode.length)'>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['shortCode'].hasError('required') && compaingForm.controls['shortCode'].touched">
                                {{'error.AddCampaign.Keyword' | translate}} </div>
                            <div class="error error-position"
                                *ngIf="compaingForm.controls['campaignDesc'].hasError('alreadyExist')&& compaingForm.controls['campaignDesc'].touched">
                                {{'error.AddCampaign.Thiskeyword' | translate}} </div>
                        </div>

                    </div>
                    <!-- <div class="col-sm-6 col-md-5 col-xs-12">
                        <div class="form-group">
                            <label>Keyword</label>
                            <textarea formControlName="responseMessage" placeholder="Enter Message Text" type="text"
                                class="form-control" [(ngModel)]="compaignObj.shortcode" id="responseMessage"
                                autocomplete="off" (focusout)="messageTextfoucsOut()"
                                (input)='changeField($event,"[^0-9 a-zA-Z\u0600-\u06FF]","0","500","responseMessage",compaignObj.responseMessage.length)'></textarea>


                        
                        <div class="error error-position"
                            *ngIf="compaingForm.controls['responseMessage'].hasError('required') && compaingForm.controls['responseMessage'].touched">
                            Keyword is required
                        </div>
                    </div>
                    </div> -->
                </div>
                <div class="row">
                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.ACKResponse' | translate}} </label>
                            <textarea formControlName="ackMsg" placeholder="{{'label.AddCampaign.EnterMessage' | translate}}" type="text"
                                class="form-control" [(ngModel)]="compaignObj.ackMsg" id="ackMsg" autocomplete="off"
                                (input)='changeField($event,"[^0-9 a-zA-Z\u0600-\u06FF]","0","500","ackMsg",compaignObj.ackMsg.length)'></textarea>



                            <div class="error error-position"
                                *ngIf="compaingForm.controls['ackMsg'].hasError('required') && compaingForm.controls['ackMsg'].touched">
                                {{'error.AddCampaign.ACKResponse' | translate}}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.NACKResponse' | translate}} </label>
                            <textarea formControlName="nackMsg" placeholder="{{'label.AddCampaign.EnterMessage' | translate}}" type="text"
                                class="form-control" [(ngModel)]="compaignObj.nackMsg" id="nackMsg" autocomplete="off"
                                (input)='changeField($event,"[^0-9 a-zA-Z\u0600-\u06FF]","0","500","nackMsg",compaignObj.nackMsg.length)'></textarea>



                            <div class="error error-position"
                                *ngIf="compaingForm.controls['nackMsg'].hasError('required') && compaingForm.controls['nackMsg'].touched">
                                {{'error.AddCampaign.NACKResponse' | translate}}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-12 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">

                        <div class="form-group">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" formControlName="integrationReq"
                                        (change)="onChangeIntegratonPull($event)" />
                                    <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                    {{'label.AddCampaign.Integration' | translate}}

                                    &nbsp;&nbsp;</label>
                            </div>

                            <div class="error error-position"
                                *ngIf="compaingForm.controls['integrationReq'].hasError('required') && compaingForm.controls['integrationReq'].touched">
                                {{'error.AddCampaign.Integration' | translate}} </div>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-md-5 col-xs-12"
                        *ngIf="compaignObj.campaignType == 'Pull'  || compaignObj.campaignType == 'Push & Pull'">
                        <div class="form-group">
                            <label>{{'label.AddCampaign.PullURL' | translate}}
                            </label>
                            <textarea formControlName="pullURL"
                                placeholder="{{'label.AddCampaign.EnterMessage' | translate}}" type="text"
                                class="form-control" [(ngModel)]="compaignObj.pullURL" id="pullURL" autocomplete="off"
                                (input)='changeField($event,"[^0-9 a-zA-Z\u0600-\u06FF]","0","500","pullURL",compaignObj.pullURL.length)'></textarea>



                            <div class="error error-position"
                                *ngIf="compaingForm.controls['pullURL'].hasError('required') && compaingForm.controls['pullURL'].touched">
                                {{'error.AddCampaign.PullURL' | translate}}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</form>

<h4 *ngIf="(Edit || isApprove || showDownloadFile) && DlEditAttachment && compaignObj.campaignType != 'Pull' "
    class="m-t-0 p-t-15  color_black  bold_800">
    {{'label.AddCampaign.Attachments' | translate}}
</h4>
<div class="row p-b-15 border_bottom"
    *ngIf="(Edit || isApprove || showDownloadFile) && DlEditAttachment && compaignObj.campaignType != 'Pull'">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="att_class">
            <p (click)="downloadAttachement()"> <a><i class="fa fa-paperclip"
                        aria-hidden="true"></i>{{compaignObj.fileNa}} </a></p>
            <!-- <p><a href=""><i class="fa fa-paperclip" aria-hidden="true"></i>ﺻﻮﺭﺓ ﺍﻟﻬﻮﻳﺔ</a></p> -->
        </div>
    </div>
</div>
<div class="form-list" *ngIf="isApprove || this.compaignObj.campaingStatus == 5 || compaignObj.status=='Approved'">
    <div class="row">
        <div class="col-sm-6 col-md-5 col-xs-12">
            <div class="form-group">
                <label>{{'label.AddCampaign.Reason' | translate}}</label>
                <textarea [disabled]="this.compaignObj.campaingStatus == 5" placeholder="Enter Reason" type="text"
                    class="form-control" [(ngModel)]="compaignObj.reason" id="reason" autocomplete="off"
                    (input)='changeField($event,"[^0-9 a-zA-Z\u0600-\u06FF]","1","500","reason",compaignObj.reason.length)'></textarea>
                <div class="error error-position" *ngIf="errReasonMsg">
                    {{'error.AddCampaign.Enter' | translate}}</div>

            </div>


        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-10 col-xs-12">
        <div class="button-right">
            <a class="cancel-btn" (click)="back()">{{'label.AddCampaign.Cancel' | translate}}</a>
            <!-- <input [class.disabled]="getAccessRole('isEdit')" *ngIf="Edit && !isApprove" (click)=Update() type="submit"
                class="add-btn" value="Update" /> -->
            <input *ngIf="newCampaign || Edit && (user.userId==compaignObj.createdBy)" (click)='save("submit")' type="submit" class="add-btn"
                value="{{'label.AddCampaign.Create' | translate}}" />
            <input *ngIf="newCampaign || Edit && (user.userId==compaignObj.createdBy)" (click)='save("draft")' type="submit" class="add-btn"
                value="{{'label.AddCampaign.Save' | translate}}" />
            <input [class.disabled]="getAccessRole('isChecker')"
                *ngIf="isApprove && (user.userId!=compaignObj.createdBy||user.data.isAdminUser) "
                (click)="approve('approve')" type="submit" class="add-btn"
                value="{{'label.AddCampaign.Approve' | translate}}" />
            <input [class.disabled]="getAccessRole('isChecker')"
                *ngIf="isApprove && (user.userId!=compaignObj.createdBy||user.data.isAdminUser) "
                (click)="approve('reject')" type="submit" class="cancel-btn"
                value="{{'label.AddCampaign.Reject' | translate}}" />
            <input [class.disabled]="getAccessRole('isChecker')"
                *ngIf="isApprove && (user.userId!=compaignObj.createdBy||user.data.isAdminUser) "
                (click)="approve('ReturnToMaker')" type="submit" class="cancel-btn"
                value="{{'label.AddCampaign.Return' | translate}}" />

            <!-- <input (click)=save() type="submit" class="add-btn" value="Save" /> -->

            <input *ngIf="compaignObj.status=='Approved'&& (user.userId==compaignObj.createdBy||user.data.isAdminUser)"
                (click)="approve('stop')" type="submit" class="cancel-btn cancel-bg"
                value="{{'label.AddCampaign.Stop' | translate}}" />
            <input *ngIf="compaignObj.status=='Stopped' && (user.userId==compaignObj.createdBy||user.data.isAdminUser)"
                (click)="approve('resume')" type="submit" class="cancel-btn"
                value="{{'label.AddCampaign.Resume' | translate}}" />

            <!-- <a class="add-btn" (click)="preview()" data-toggle="modal" data-target="#preview-modal">preview</a> -->
        </div>
    </div>
</div>


<div class="modal fade left-alignmodal" id="preview-modal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog notify-modal" role="document">
        <div class="modal-content">
            <div class="modal-heading">{{'label.AddCampaign.Preview' | translate}}</div>
            <div class="modal-body">
                <div class="previewmodel-body">
                    <div class="customer-dr" *ngIf="this.compaignObj.channel == '2'">
                        {{'label.AddCampaign.Subject' | translate}}: {{compaignObj.subject}}
                    </div>
                    <p *ngIf="this.compaignObj.channel != '2'">{{compaignObj.previewMsg}}</p>
                    <p *ngIf="this.compaignObj.channel == '2'" [innerHTML]=compaignObj.previewMsg></p>
                    <!-- <div class="form-group" *ngIf="this.compaignObj.channel == '2'">
                        <label>Email id </label>


                        <input type="email" class="form-control" [(ngModel)]="compaignObj.emailId" id="emailId"
                            (input)='changeField($event,"/^[^\s@]+@[^\s@]+\.[^\s@]+$/","1","35","opEmailId",compaignObj.emailId.length)'>
                    </div> -->
                </div>
                <a class="add-btn" data-toggle="modal"  data-target="#testcampaign-modal" data-dismiss="modal">
                    {{'label.AddCampaign.TestCampaign' | translate}}
                </a>
                <a class="cancel-btn" (click)="cancel()">{{'label.AddCampaign.Cancel' | translate}}</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade left-alignmodal" id="testcampaign-modal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog notify-modal" role="document">
        <div class="modal-content">
            <div class="modal-heading">{{'label.AddCampaign.TestCampaign' | translate}}</div>
            <div class="modal-body">
                <div class="testcampaign-content" *ngIf="compaignObj.channel==1">
                    <form [formGroup]="phoneForm">
                        <div formArrayName="phoneNo">


                            <div class="form-group phone-mumber"
                                *ngFor="let phForm of phoneForm['controls'].phoneNo['controls']; let i = index"
                                formGroupName="{{i}}">
                                <label>{{'label.AddCampaign.MobileNumber' | translate}} </label>
                                <div class="mobilenumber-row">

                                    <ngx-intl-tel-input [cssClass]="'custom'" [enablePlaceholder]="true"
                                        [searchCountryFlag]="true" [maxLength]="15" [tooltipField]="TooltipLabel.Name"
                                        [onlyCountries]="CountryISO" [separateDialCode]="separateDialCode" name="CorpPreMobileNo"
                                        formControlName="phone">
                                    </ngx-intl-tel-input>
                                    <label class="addnumber"><i (click)="addPhoneControl()" class="icon-plus"
                                            title="Add" data-toggle="tooltip" data-placement="left"></i></label>
                                    <div class="error error-position error-right"
                                        *ngIf="phForm.controls['phone'].hasError('validatePhoneNumber') && phForm.controls['phone'].touched">
                                        {{'error.AddCampaign.Invalidphone' | translate}}
                                    </div>

                                     </div>
                                    </div>
                                    <!-- <div class="error error-position"
                                        *ngIf="phForm.controls['phone'].hasError('required') && phForm.controls['phone'].touched">
                                        Work
                                        Phone
                                        is
                                        required
                                    </div> -->
                                    <!-- <label class="deletenumber"><i class="icon-delete" title="Delete" data-toggle="tooltip"
                                    data-placement="left"></i></label> -->
                                
                        </div>
                    </form>
                </div>
                <div class="testcampaign-content" *ngIf="compaignObj.channel==2">
                    <form [formGroup]="emailForm">
                        <div formArrayName="email">


                            <div class="form-group "
                                *ngFor="let phForm of emailForm['controls'].email['controls']; let i = index"
                                formGroupName="{{i}}">
                                <label>{{'label.AddCampaign.Email' | translate}} </label>
                                <div class="mobilenumber-row">

                                    <!-- <input type="email" name="email" formControlName="email"> -->
                                    <input type="email" class="form-control" formControlName="email"
                                        (input)='changeField($event,"/^[^\s@]+@[^\s@]+\.[^\s@]+$/","1","35","opEmailId",phForm.controls["email"].value.length)'>

                                    <label class="addnumber"><i (click)="addEmailControl()" class="icon-plus"
                                            title="Add" data-toggle="tooltip" data-placement="left"></i></label>

                                    <div class="error error-position error-right"
                                        *ngIf="phForm.controls['email'].hasError('required') && phForm.controls['email'].touched">
                                        {{'error.AddCampaign.Emailrequired' | translate}}
                                    </div>
                                    <div class="error error-position error-right"
                                    *ngIf="phForm.controls['email'].hasError('email') && phForm.controls['email'].touched">
                                    {{'error.AddCampaign.ValidEmail' | translate}} </div>
                                    <!-- <label class="deletenumber"><i class="icon-delete" title="Delete" data-toggle="tooltip"
                                    data-placement="left"></i></label> -->
                                </div>

                            </div>
                        </div>
                    </form>
                </div>
                <a class="add-btn" (click)="sendMessage()">{{'label.AddCampaign.Send' | translate}}</a>
                <a class="cancel-btn" data-dismiss="modal">{{'label.AddCampaign.Cancel' | translate}}</a>
            </div>
        </div>
    </div>
</div>


<div class="modal fade left-alignmodal" id="showMessageModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog notify-modal" role="document">
        <div class="modal-content">
            <div class="modal-heading">{{'label.AddCampaign.Success' | translate}}</div>
            <div class="modal-body">
                <div class="customer-dr" *ngIf="this.compaignObj.channel == '2'">
                    {{'label.AddCampaign.Subject' | translate}}: {{compaignObj.subject}}
                </div>
                <p>
                    {{'label.AddCampaign.TotalMsgs' | translate}} : {{showSuccessMsg.totalMsgs}}<br>
                    {{'label.AddCampaign.ValidMsgs' | translate}} : {{showSuccessMsg.validMsgs}}<br>
                    {{'label.AddCampaign.DuplicateMsgs' | translate}} :{{showSuccessMsg.duplicateMsgs}}<br>
                    {{'label.AddCampaign.InvalidMsgs' | translate}} : {{showSuccessMsg.invalidMsgs}}<br>
                    {{'label.AddCampaign.CostPerMsg' | translate}} : {{showSuccessMsg.costPerMsg}}<br>
                    {{'label.AddCampaign.TotalCost' | translate}} : {{showSuccessMsg.totalCost}}<br>
                    *{{'label.AddCampaign.Only' | translate}}

                </p>

                <a class="add-btn" (click)="goToBack()"><span>{{'label.AddCampaign.Ok' | translate}}</span></a>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="multitemplate-popup" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog notify-modal notify-modallg" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <h4>{{'label.AddCampaign.SelectTemplate' | translate}}
                    <button type="button" class="close close-top" data-dismiss="modal" aria-label="Close">
                        <span class="icon-close1"></span>
                    </button>
                </h4>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="col-sm-6 col-xs-12">
                            <div class="pre-template">

                                <!-- <p *ngIf="this.compaignObj.channel == 1">{{selectedTemplate.content}}</p> -->
                                <h2 *ngIf="this.compaignObj.channel != 1">
                                    {{selectedTemplate.subject}}
                                </h2>
                                <p [innerHTML]=selectedTemplate.content></p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xs-12">
                            <div class="template-search">
                                <i class="icon-search"></i>
                                <input type="text" [(ngModel)]="searchTemplate" />
                            </div>
                            <div class="overall-template">
                                <div class="pre-templatelist" [class.active]="listTemplate.active"
                                    (click)="selectTemplate(listTemplate)"
                                    *ngFor="let listTemplate of listTemplates  | templateFilter:searchTemplate:'templateName'; let i=index ">
                                    <h2>{{listTemplate.templateName}}</h2>
                                    <p>{{'label.AddCampaign.Createdon' | translate}}
                                        {{listTemplate.createdDate| showDate}} </p>
                                    <span class="icon-preTick"></span>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="foot-btn">
                    <a class="add-btn" (click)="templateSelect()">{{'label.AddCampaign.Usetemplate' | translate}}</a>
                    <a class="cancel-btn" data-dismiss="modal">{{'label.AddCampaign.cancel' | translate}}</a>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="modal fade" id="multitemplate-popup1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog notify-modal notify-modallg" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <h4>{{'label.AddCampaign.SelectTemplate1' | translate}}
                    <button type="button" class="close close-top" data-dismiss="modal" aria-label="Close">
                        <span class="icon-close1"></span>
                    </button>
                </h4>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="col-sm-6 col-xs-12">
                            <div class="pre-template">

                        
                                <div *ngFor ="let content of promoArry">
                                    
                                <p [innerHTML]=content></p>
                            </div>
                        </div>
                        </div>
                        <div class="col-sm-6 col-xs-12">
                            <div class="template-search">
                                <i class="icon-search"></i>
                                <input type="text" [(ngModel)]="searchPromoTemplate" />
                            </div>
                            
                            <div class="overall-template">
                                <div class="pre-templatelist pre-templatelist{{i}}" (click)="selectPromoTemplates(listTemplate,i)"
                                    
                                  *ngFor="let listTemplate of promoModalList  | templateFilter:searchPromoTemplate:'promoName'; let i=index ">

                                    <h2 >{{listTemplate.promoName}}</h2>
                                    <p>{{'label.AddCampaign.Createdon1' | translate}}
                                        {{listTemplate.createdDate| showDate}} </p>
                                    
                                    
                                    <span class="icon-preTick"></span>
                                </div>

                            </div>
                        
                        </div>
                    </div>
                </div>

                <div class="foot-btn">
                    <a class="add-btn" (click)="templateSelect1()">{{'label.AddCampaign.Usetemplate1' | translate}}</a>
                    <a class="cancel-btn" data-dismiss="modal">{{'label.AddCampaign.cancel1' | translate}}</a>
                </div>
            </div>

        </div>
    </div>
</div>