<div class="breadcrumb-div">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/home/dashboard/">{{'label.CampaignMessage.Home' | translate}}</a>
        </li>
        <li class="breadcrumb-item active">Campaign Message Details Report</li>
    </ol>
</div>
<div class="inner-head display-head">
    <!-- <h2>{{ role.menuLabel }}</h2> -->
    <h2>Campaign Message Details Report</h2>
    <!-- <div class="active-sec">
        <button class="refresh-btn" data-toggle="tooltip" title="Refresh" (click)="refresh()">
            <i class="icon-refresh"></i>
        </button>
    </div> -->
</div>


<div class="report-btn">
    <div class="dropdown">
        <button class="toggle-btn dropdown-toggle" type="button" data-toggle="dropdown">
            {{'label.MessageStatistics.ExportAs' | translate}}
        </button>
        <ul class="dropdown-menu">
            <li (click)="downloadReport('pdf')">
                <a><img src="../../../assets/images/pdf.svg" /></a>
            </li>
            <li (click)="downloadReport('xlsx')">
                <a><img src="../../../assets/images/xl.svg" /></a>
            </li>
        </ul>
    </div>
</div>


<button class="toggle-btn" data-toggle="modal" data-target="#detailFilter">
    <span class="icon-parameter1"></span> {{'label.MessageStatistics.Filters' | translate}}
</button>
<div class="tablesearch-sort tablesearch-sort12">
    <div class="search-input">
        <div class="searchexpand">
            <input type="text" placeholder="{{'label.MessageStatistics.Search' | translate}}" id="searchTextId"
                [(ngModel)]="SearchValue" />
            <button type="submit"><i class="icon-search"></i></button>
        </div>
        <span class="icon-search"></span>
        <span class="icon-close1 closesearch" (click)="resetSearch()"></span>
    </div>

</div>


<div class="responsive-nt">
    <div class="parentId">
        <div class="table-responsive">
            <table class="table datatable summaryDatatable display nowrap" style="width: 100%;">
                <thead>
                    <tr>
                        <th scope="col">{{'label.CampaignMessage.CampaignName' | translate}}</th>
                        <th scope="col">{{'label.CampaignMessage.Channel' | translate}}</th>
                        <th scope="col">{{'label.CampaignMessage.ChannelAddress' | translate}}</th>
                        <th scope="col">{{'label.CampaignMessage.Status' | translate}}</th>
                        <th scope="col">{{'label.CampaignMessage.ScheduledDate' | translate}}</th>
                        <th scope="col">{{'label.CampaignMessage.DeliveredStatus' | translate}}</th>
                        <!-- <th scope="col">{{'label.CampaignMessage.DeliveredFailure' | translate}}</th> -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let campaign of campaginList">
                        <td class="ellipsis">
                            <a title="{{ campaign.CAMPAIGN_DESC }}"
                                data-toggle="tooltip">{{ campaign.CAMPAIGN_DESC }}</a></td>
                        <td class="ellipsis">
                            <a title="{{ getChannelName(campaign.channel) }}"
                                data-toggle="tooltip">{{ getChannelName(campaign.channel) }}</a></td>
                        <td class="ellipsis">
                            <a title="{{ campaign.CHANNEL_ADDRESS }}"
                                data-toggle="tooltip">{{ campaign.CHANNEL_ADDRESS }}</a></td>
                        <td class="ellipsis">
                            <a title="{{ campaign.STATUS }}" data-toggle="tooltip">{{ campaign.STATUS }}</a></td>
                        <td class="ellipsis">
                            <a title="{{ campaign.SCHEDULE_DATE_TIME | showDate }}"
                                data-toggle="tooltip">{{ campaign.SCHEDULE_DATE_TIME | showDate }}</a></td>
                        <td class="ellipsis">
                            <i class="icon-approve" *ngIf="campaign.DELIVERYSTATUS == 1"></i><i
                                *ngIf="campaign.DELIVERYSTATUS != 1" class="icon-reject"></i>
                            <span *ngIf="campaign.DELIVERYSTATUS ==1">
                                {{'label.MessageStatistics.Success' | translate}}
                            </span>
                            <span *ngIf="campaign.DELIVERYSTATUS ==2">
                                {{'label.MessageStatistics.Failure' | translate}}
                            </span>
                            <span *ngIf="campaign.DELIVERYSTATUS ==3">
                                {{'label.MessageStatistics.Pending' | translate}}
                            </span>
                            <span *ngIf="campaign.DELIVERYSTATUS ==4">
                                {{'label.MessageStatistics.Blocked' | translate}}
                            </span>
                            <span *ngIf="campaign.DELIVERYSTATUS ==5">
                                {{'label.MessageStatistics.Expired' | translate}}
                            </span>
                            <span *ngIf="campaign.DELIVERYSTATUS ==6">
                                {{'label.MessageStatistics.OPTOut' | translate}}
                            </span>
                        </td>
                        <!-- <td class="ellipsis">
                            <a title="{{ campaign.deliveredFailure }}"
                                data-toggle="tooltip">{{ campaign.deliveredFailure }}</a></td> -->
                        <!-- <td>{{campaign.dlkadsjf}}</td> -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>



<div class="modal fade right promolanguage-model" id="detailFilter" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <button type="button" class="close" (click)="close()"  aria-label="Close">
            <span class="icon-close"></span>
        </button>
        <div class="modal-content report-modal">
            <div class="modal-heading">{{'label.MessageStatistics.Filters' | translate}}</div>
            <div class="modal-body">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.CampaignMessage.CampaignName' | translate}}</label>
                        <div class="styled-select">
                            <select (change)="onCampaignChange()" class="form-control" [(ngModel)]="reqObj.campaignId"
                                id="campaignName">
                                <option value="0" selected>{{'label.CampaignMessage.All' | translate}} </option>
                                <option *ngFor="let campaignName of campaignNames; let i = index"
                                    value="{{ campaignName.campaignId }}">
                                    {{ campaignName.campaignDesc }}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.CampaignMessage.Channel' | translate}}</label>
                        <div class="styled-select">
                            <select class="form-control" [(ngModel)]="reqObj.channelId" id="listServices">
                                <option value="0" selected> {{'label.CampaignMessage.All' | translate}}</option>
                                <option *ngFor="let channel of channelList; let i = index"
                                    value="{{ channel.channelId }}">
                                    {{ channel.channelDesc }}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.CampaignMessage.ChannelAddress' | translate}}</label>

                        <input type="text" [(ngModel)]="reqObj.channelAddress" class="form-control">



                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.CampaignMessage.Status' | translate}}</label>
                        <div class="styled-select">
                            <select class="form-control" [(ngModel)]="reqObj.campaignStatus" id="campaignStatus"
                                (change)="onChange($event.target.value)">
                                <option value="0" selected> All</option>
                                <option *ngFor="let status of campaignStatus; let i = index" value="{{ status.id }}">
                                    {{ status.name }}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.CampaignMessage.ScheduledFromTo' | translate}} &nbsp; &nbsp;</label>
                        <input [owlDateTime]="Date" class="form-control" [(ngModel)]="reqObj.Date"
                            [owlDateTimeTrigger]="Date" [selectMode]="'range'"
                            placeholder="{{'label.CampaignMessage.Date' | translate}}" />
                        <owl-date-time [pickerType]="'calendar'" #Date></owl-date-time>
                    </div>
                </div>
                <div class="modal-footer">

                    <div class="button-right">
                        <button class="cancel-btn"
                            (click)="clear()">{{'label.MessageStatistics.ClearAll' | translate}}</button>
                        <button class="add-btn" (click)="getReport()">
                            <span>{{'label.MessageStatistics.Apply' | translate}}</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>