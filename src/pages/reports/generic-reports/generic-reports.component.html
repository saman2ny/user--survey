<div class="breadcrumb-div">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/home/dashboard/">{{'label.UserProfileReport.Home' | translate}}</a>
        </li>
        <li class="breadcrumb-item active">{{role.menuLabel}}</li>
    </ol>
</div>
<div class="inner-head display-head">
    <h2>{{role.menuLabel}}</h2>
    <div class="active-sec">
        <button class="refresh-btn" data-toggle="tooltip" title="Refresh" (click)="refresh()"><i
                class="icon-refresh"></i></button>
    </div>
</div>

<div class="report-btn">
    <div class="dropdown">
        <button class="toggle-btn dropdown-toggle" type="button" data-toggle="dropdown">
            {{'label.UserProfileReport.ExportAs' | translate}}
        </button>
        <ul class="dropdown-menu">
            <li (click)="downloadReport('pdf')">
                <a><img src="../../../assets/images/pdf.svg" /></a>
            </li>
            <li (click)="downloadReport('xlsx')">
                <a><img src="../../../assets/images/xl.svg" /></a>
            </li>
            <!-- <li (click)="downloadReport('csv')"><a><img src="../../../assets/images/xl.svg" /></a></li> -->
        </ul>
    </div>
</div>
<button class="toggle-btn" data-toggle="modal" data-target="#sidemodal"><span class="icon-parameter1"></span>
    {{'label.UserProfileReport.Filters' | translate}}
</button>
<div class="tablesearch-sort tablesearch-sort12">
    <div class="search-input">
        <div class="searchexpand">
            <input id="searchTextId" type="text" placeholder="{{'label.UserProfileReport.Search' | translate}}" [(ngModel)]="SearchValue" />
            <button type="submit"><i class="icon-search"></i></button>
        </div>
        <span class="icon-search"></span>
        <span class="icon-close1 closesearch" (click)="resetSearch()"></span>
    </div>
    <div class="search-value" *ngIf="isFilterStatus">
        <p class="sortby-title">{{'label.UserProfileReport.Filteredby' | translate}}</p>
        <p>{{'label.UserProfileReport.Status' | translate}} <i class="icon-close1" (click)="clearTableFilter()"></i></p>
        <p class="clearall" (click)="clearTableFilter()">{{'label.UserProfileReport.ClearAll' | translate}}</p>
    </div>
    <!-- <div class="search-value" *ngIf=" filterDetailsObj.isStatusFilter || filterDetailsObj.isApprovalStatusFilter">
      <p class="sortby-title">Filtered by</p> -->

    <!-- <p *ngIf="reqObj.isStatusFilter">Status <i (click)="clearStatus()" class="icon-close1"></i></p> -->
    <!-- <p *ngIf="filterDetailsObj.isApprovalStatusFilter">Status <i (click)="clearApprovedStatus()" class="icon-close1"></i></p>
        <p class="clearall" (click)="clearAllFilter()">Clear All</p>
    </div> -->
</div>



<div class="responsive-nt">
    <div class="parentId">
        <div class="userarrow-sec userarrow-section_1">
            <div class="table-checkfilter">
                <div class="searchbox">
                    <input type="text" [(ngModel)]="tableFilter.searchTypeFilter" placeholder="{{'label.UserProfileReport.Search' | translate}}" />
                </div>
                <div class="tablesearch-content">
                    <ul>
                        <li>
                            <div class="checkbox" *ngFor="let item of tableStatus | customeTableFilter:tableFilter.searchTypeFilter:'name'">
                                <label>
                                    <input type="checkbox" [(ngModel)]="item.isChecked" (change)="onStatusChange()" />
                                    <span class="cr"> <i class="cr-icon fa fa-check"></i></span>
                                    {{item.name}}
                                    &nbsp;&nbsp;</label>
                            </div>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="userarrow-sec userarrow-section_2">
            <div class="table-checkfilter">
                <div class="searchbox">
                    <input type="text" placeholder="{{'label.UserProfileReport.Search' | translate}}" />
                </div>
                <div class="tablesearch-content">
                    <ul>
                        <li>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" [(ngModel)]="statusBranch"
                                        (change)="onApprovalStatusChange('Branch')" />
                                    <span class="cr"><i
                                            class="cr-icon fa fa-check"></i></span>{{'label.UserProfileReport.Branch' | translate}}
                                    &nbsp;&nbsp;</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" [(ngModel)]="statusCompany"
                                        (change)="onApprovalStatusChange('Company')" />
                                    <span class="cr"><i
                                            class="cr-icon fa fa-check"></i></span>{{'label.UserProfileReport.Company' | translate}}
                                    &nbsp;&nbsp;</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" [(ngModel)]="statusSuperAdmin"
                                        (change)="onApprovalStatusChange('Super Admin')" />
                                    <span class="cr"><i
                                            class="cr-icon fa fa-check"></i></span>{{'label.UserProfileReport.SuperAdmin' | translate}}
                                    &nbsp;&nbsp;</label>
                            </div>
                        </li>



                    </ul>
                </div>
            </div>
        </div>
   
<table class="table datatable summaryDatatable display nowrap" style="width:100%;">
    <thead >
        <tr>
            <th scope="col" *ngIf="hideUserColumn">{{'label.UserProfileReport.UserID' | translate}}</th>
            <th scope="col" *ngIf="hideUserColumn">{{'label.UserProfileReport.UserName' | translate}}</th>
            <th scope="col" data-val="2">{{'label.UserProfileReport.UserType' | translate}}
                <span class="icon-uniE90D user-arrow filter-open"></span>

            </th>
            <th>{{'label.UserProfileReport.Company' | translate}}</th>
            <th scope="col">{{'label.UserProfileReport.Branch' | translate}}</th>
            <th scope="col" data-val="1">{{'label.UserProfileReport.UserStatus' | translate}}
                <span class="icon-uniE90D user-arrow filter-open"></span>
            </th>
            <th scope="col">{{'label.UserProfileReport.ApprovedBy' | translate}}</th>
            <th scope="col">{{'label.UserProfileReport.LastModified' | translate}}</th>
            <th scope="col">{{'label.UserProfileReport.RolesAssigned' | translate}}</th>
            <th scope="col">{{'label.UserProfileReport.PrivilegesAssigned' | translate}}</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let detail of summaryDetailsDummy">
            <td data-th="User ID" class="ellipsis" *ngIf="hideUserColumn">
                <a title="{{detail.opUserId}}" data-toggle="tooltip">{{detail.opUserId}}" </a> </td>
            <td data-th="User Name" class="ellipsis" *ngIf="hideUserColumn">
                <a title="{{detail.opUserName}}" data-toggle="tooltip"> {{detail.opUserName}}</a></td>
            <td data-th="User Type" class="ellipsis">
                <a title="{{detail.userType}}" data-toggle="tooltip"> {{detail.userType}}</a></td>
            <td data-th="Company" class="ellipsis">
                <a title="{{detail.companyName}}" data-toggle="tooltip">{{detail.companyName}}</a></td>
            <td data-th="Branch" class="ellipsis">
                <a title="{{detail.branchName}}" data-toggle="tooltip">{{detail.branchName}}</a></td>
            <td data-th="User Status"><i class="icon-approve" *ngIf="detail.opStatus=='Active'"></i>
                <i class="icon-reject" *ngIf="detail.opStatus!='Active'"></i> {{detail.opStatus}}
            </td>
            <!-- <td data-th="Created Date" class="ellipsis">
                <a title="{{detail.createdDate| showDate}}" data-toggle="tooltip">{{detail.createdDate| showDate}}</a>
            </td> -->
            <!-- <td data-th="Created By" class="ellipsis">
                <a title="{{detail.createdBy}}" data-toggle="tooltip"> {{detail.createdBy}}</a></td> -->
            <!-- <td data-th="Approved Date">{{detail.opUserId}}</td> -->
            <td data-th="Approved By" class="ellipsis">
                <a title="{{detail.approvedBy}}" data-toggle="tooltip">{{detail.approvedBy}}</a></td>
            <td data-th="Last Modified Date & Time" class="ellipsis">
                <a title="{{detail.modifiedDate| showDate}}" data-toggle="tooltip">{{detail.modifiedDate| showDate}}</a>
            </td>
            <td class="column1 overlap-dsc ellipsis" data-th="Roles Assigned">
                <a class="linktext" *ngFor="let item of detail.assignedRoles| slice:0:1">
                    <span>{{item.groupName}}<span>,</span></span>
                </a>
                <div class="promolist-dropdown">
                    <span class="dropdown-toggle promoid-count" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{detail.assignedRoles.length}}</span>
                    <div class="promolist dropdown-menu">
                        <ul>
                            <li *ngFor="let item of detail.assignedRoles" data-toggle="tooltip" title="{{item.groupName}}">{{item.groupName}}</li>
                            <!-- <li>50647-UAE ADIB Account</li> -->
                        </ul>
                    </div>
                </div>
            </td>
            <td class="column1 overlap-dsc ellipsis" data-th="Privilege Assigned">
                <a class="linktext" *ngFor="let item of detail.privilegeList| slice:0:1">
                    <span>{{item.menuLabel}}<span>,</span></span>
                </a>
                <div class="promolist-dropdown">
                    <span class="dropdown-toggle promoid-count" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{detail.privilegeList.length}}</span>
                    <div class="promolist dropdown-menu">
                        <ul>
                            <li *ngFor="let item of detail.privilegeList" data-toggle="tooltip" title="{{item.menuLabel}}">{{item.menuLabel}}</li>
                            <!-- <li>50647-UAE ADIB Account</li> -->
                        </ul>
                    </div>
                </div>
            </td>
        </tr>


    </tbody>
</table>
</div>
</div>




<div class="modal fade right promolanguage-model" id="sidemodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <button type="button" class="close " data-dismiss="modal" aria-label="Close">
            <span class="icon-close"></span>
        </button>
        <div class="modal-content report-modal">
            <div class="modal-heading">{{'label.UserProfileReport.Filters' | translate}}</div>
            <div class="modal-body">
                <div class="col-xs-12" *ngIf="isSuperAdmin">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.UserType' | translate}}</label>
                        <div class="styled-select">
                            <select [(ngModel)]="filterDetailsObj.userType">
                                <option value="">{{'label.UserProfileReport.All' | translate}}</option>

                                <!-- <option *ngFor="let type of serviceTypeMaster">
                  {{type}}
                </option> -->
                                <option>{{'label.UserProfileReport.Company' | translate}}</option>
                                <option>{{'label.UserProfileReport.Individual' | translate}}</option>
                            </select>
                            <span class="fa fa-sort-desc"></span>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12" *ngIf="isSuperAdmin">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.Company' | translate}}</label>

                        <p-dropdown [options]="companyMaster" optionLabel="companyName" [(ngModel)]="filterDetailsObj.comp" [filter]="true"></p-dropdown>


                    </div>
                </div>
                <div class="col-xs-12" *ngIf="hideUserColumn">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.Branch' | translate}}</label>

                        <p-dropdown [options]="branchMaster" optionLabel="branchName" [(ngModel)]="filterDetailsObj.selectedBranch" [filter]="true"></p-dropdown>


                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.Roles' | translate}}</label>
                        <p-multiSelect optionLabel="groupName" defaultLabel="Select a rolese" [options]="roleMaster" [(ngModel)]="filterDetailsObj.groupList" [filter]="true">
                            <ng-template let-selectedCars pTemplate="selectedItems">
                                <span *ngFor="let selectedCar of selectedCars">{{selectedCar.groupName}}</span>
                            </ng-template>
                        </p-multiSelect>
                        <!-- <div class="styled-select">
              <select [(ngModel)]="filterDetailsObj.privilegeList">
                <option value="">All</option>

                <option *ngFor="let type of privilegeList" value="{{type.menuLabel}}">
                  {{type.menuLabel}}
                </option>
              </select>
              <span class="fa fa-sort-desc"></span>
            </div> -->
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.Privileges' | translate}}</label>
                        <p-multiSelect optionLabel="menuLabel" defaultLabel="Select a privileges" [options]=" privilegeList" [(ngModel)]="filterDetailsObj.privilegeList" [filter]="true">
                            <ng-template let-selectedCars pTemplate="selectedItems">
                                <span *ngFor="let selectedCar of selectedCars">{{selectedCar.menuLabel}}</span>
                            </ng-template>
                        </p-multiSelect>
                        <!-- <div class="styled-select">
              <select [(ngModel)]="filterDetailsObj.serviceType">
                <option value="">All</option>

                <option *ngFor="let type of roleMaster">
                  {{type.menuLabel}}
                </option>
               
              </select>
              <span class="fa fa-sort-desc"></span>
            </div> -->
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.CreatedDate' | translate}}</label>
                        <input [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1" [selectMode]="'range'" [max]="maxDate" [(ngModel)]="filterDetailsObj.requestedDate" class="form-control" placeholder="{{'label.UserProfileReport.DateTime' | translate}}">
                        <owl-date-time [pickerType]="'calendar'" #dt1></owl-date-time>
                        <span class="icon-date div-date"></span>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="form-group">
                        <label>{{'label.UserProfileReport.ModifiedDate' | translate}}</label>
                        <input [owlDateTime]="dt2" [owlDateTimeTrigger]="dt2" [selectMode]="'range'" [max]="maxDate" (dateTimeChange)="changeModifiedDate()" [(ngModel)]="filterDetailsObj.processedDate" class="form-control" placeholder="{{'label.UserProfileReport.DateTime' | translate}}">
                        <owl-date-time [pickerType]="'calendar'" #dt2></owl-date-time>
                        <span class="icon-date div-date"></span>
                    </div>
                </div>
                <!-- <div class="col-xs-12">
          <div class="checkbox">
            <label>
              <input type="checkbox" [(ngModel)]="filterDetailsObj.allRolesCheck">
              <span class="cr"><i class="cr-icon fa fa-check"></i></span>
              Include all roles assigned
            </label>
          </div>
        </div>

        <div class="col-xs-12">
          <div class="checkbox">
            <label>
              <input type="checkbox" [(ngModel)]="filterDetailsObj.allPrivilegeCheck">
              <span class="cr"><i class="cr-icon fa fa-check"></i></span>
              Include all privileges assigned
            </label>
          </div>
        </div> -->
            </div>
            <div class="modal-footer">
                <div class="button-right">
                    <button class="cancel-btn" (click)="clear()">{{'label.UserProfileReport.ClearAll' | translate}}</button>
                    <button class="add-btn" (click)="filter()"><span>{{'label.UserProfileReport.Apply' | translate}}</span></button>
                </div>
            </div>

        </div>
    </div>
</div>